---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "logtail_collector Resource - terraform-provider-logtail"
subcategory: ""
description: |-
  This resource allows you to create, modify, and delete Better Stack Collectors. For more information about the Collectors API check https://betterstack.com/docs/logs/api/collectors/
---

# logtail_collector (Resource)

This resource allows you to create, modify, and delete Better Stack Collectors. For more information about the Collectors API check https://betterstack.com/docs/logs/api/collectors/

## Example Usage

```terraform
# Collector with dual-layer VRL: on-host PII redaction + server-side enrichment
resource "logtail_collector" "production" {
  name     = "Production Docker"
  platform = "docker"
  note     = "Docker hosts with PII redaction for GDPR compliance"

  logs_retention    = 30
  metrics_retention = 90

  # On-host VRL runs inside your infrastructure — raw data never leaves your network
  configuration {
    vrl_transformation = <<-EOT
      # Redact e-mail addresses
      if is_string(.message) {
        .message = replace!(.message, r'[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}', "[REDACTED_EMAIL]")
      }
      # Redact known PII fields
      if exists(.user_email) { .user_email = "[REDACTED]" }
      if exists(.client_ip) { .client_ip = "[REDACTED]" }
    EOT

    components {
      logs_host    = true
      logs_docker  = true
      ebpf_metrics = true
    }
  }

  # Server-side VRL runs during ingestion on Better Stack
  source_vrl_transformation = <<-EOT
    .environment = "production"
    .compliance_redacted = true
  EOT
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of this collector.
- `platform` (String) The platform of this collector. This value can be set only when creating a new collector and cannot be changed later. Valid values are: `docker`, `swarm`, `kubernetes`, `proxy`.

### Optional

- `configuration` (Block List, Max: 1) Collector-level configuration including active components, sampling rates, batching, and VRL transformations. These settings run on the collector host inside your infrastructure. (see [below for nested schema](#nestedblock--configuration))
- `custom_bucket` (Block List, Max: 1) Optional custom bucket configuration for the collector. Once set, it cannot be removed. (see [below for nested schema](#nestedblock--custom_bucket))
- `data_region` (String) Data region (e.g. `eu`, `us`) or private cluster name to create the collector in. This can only be set at creation time. Note: the API may return a different identifier (the internal storage region name) than the value you provided.
- `databases` (Block List) Database connections for the collector. (see [below for nested schema](#nestedblock--databases))
- `ingesting_paused` (Boolean) Whether ingestion is paused for this collector.
- `live_tail_pattern` (String) Freeform text template for formatting Live tail output with columns wrapped in {column} brackets. Example: "PID: {message_json.pid} {level} {message}"
- `logs_retention` (Number) Data retention for logs in days. Allowed values: 7, 30, 60, 90, 180, 365, 730, 1095, 1460, 1825. There might be additional charges for longer retention.
- `metrics_retention` (Number) Data retention for metrics in days. Allowed values: 7, 30, 60, 90, 180, 365, 730, 1095, 1460, 1825. There might be additional charges for longer retention.
- `note` (String) A description or note about this collector.
- `proxy_config` (Block List, Max: 1) Proxy settings including buffering proxy, SSL/TLS, and HTTP Basic Authentication. Only applicable to `proxy` platform collectors. (see [below for nested schema](#nestedblock--proxy_config))
- `source_group_id` (Number) The ID of the source group (folder) this collector belongs to. Set to `0` to remove from a group.
- `source_vrl_transformation` (String) Server-side VRL transformation that runs during ingestion on Better Stack. Use this for enrichment, routing, or light normalization that doesn't involve sensitive data. For PII redaction and sensitive data filtering, prefer `configuration.vrl_transformation` which runs on the collector host and ensures raw data never leaves your network. Read more about [VRL transformations](https://betterstack.com/docs/logs/using-logtail/transforming-ingested-data/logs-vrl/).
- `team_name` (String) Used to specify the team the resource should be created in when using global tokens.
- `user_vector_config` (String) Custom Vector YAML configuration for additional sources and transforms beyond the built-in component toggles. Must not contain `command:` directives.

### Read-Only

- `created_at` (String) The time when this collector was created.
- `databases_count` (Number) The number of database connections configured for this collector.
- `hosts_count` (Number) The number of hosts connected to this collector.
- `hosts_up_count` (Number) The number of hosts currently online.
- `id` (String) The ID of this collector.
- `pinged_at` (String) The time when this collector last received data.
- `secret` (String, Sensitive) The secret token used to authenticate collector hosts.
- `source_id` (Number) The ID of the underlying source. Use this with `logtail_metric` to define metrics on this collector's data.
- `status` (String) The current status of this collector.
- `team_id` (String) The team ID for this resource.
- `updated_at` (String) The time when this collector was last updated.

<a id="nestedblock--configuration"></a>
### Nested Schema for `configuration`

Optional:

- `components` (Block List, Max: 1) Enable or disable specific collector components. Maps to the Logs, Metrics, and eBPF tabs in the collector settings UI. (see [below for nested schema](#nestedblock--configuration--components))
- `disk_batch_size_mb` (Number) Disk buffer size in MB for outgoing requests. Minimum 256 MB.
- `logs_sample_rate` (Number) Sample rate for logs (0-100).
- `memory_batch_size_mb` (Number) Memory batch size in MB for outgoing requests. Maximum 40 MB.
- `namespace_option` (Block Set) Per-namespace overrides for log sampling rate and trace ingestion (Kubernetes only). Order-independent; entries are identified by name. (see [below for nested schema](#nestedblock--configuration--namespace_option))
- `service_option` (Block Set) Per-service overrides for log sampling rate and trace ingestion. Only includes user-managed services; internal collector services (`better-stack-beyla`, `better-stack-collector`) are excluded. Use the `logtail_collector` data source to see all discovered services. (see [below for nested schema](#nestedblock--configuration--service_option))
- `traces_sample_rate` (Number) Sample rate for traces (0-100).
- `vrl_transformation` (String) VRL transformation that runs on the collector host, inside your infrastructure, before data is transmitted to Better Stack. Use this for PII redaction and sensitive data filtering — raw data never leaves your network. For server-side transformations that run during ingestion on Better Stack, use the top-level `source_vrl_transformation` attribute instead. Read more about [VRL transformations](https://betterstack.com/docs/logs/using-logtail/transforming-ingested-data/logs-vrl/).

<a id="nestedblock--configuration--components"></a>
### Nested Schema for `configuration.components`

Optional:

- `ebpf_metrics` (Boolean) Enable eBPF-based metrics collection.
- `ebpf_tracing_basic` (Boolean) Enable basic eBPF tracing.
- `ebpf_tracing_full` (Boolean) Enable full eBPF tracing.
- `logs_collector_internals` (Boolean) Collect internal collector logs.
- `logs_docker` (Boolean) Collect Docker container logs.
- `logs_host` (Boolean) Collect host-level logs.
- `logs_kubernetes` (Boolean) Collect Kubernetes logs.
- `metrics_apache` (Boolean) Collect Apache metrics.
- `metrics_databases` (Boolean) Collect database metrics via the cluster agent.
- `metrics_nginx` (Boolean) Collect Nginx metrics.


<a id="nestedblock--configuration--namespace_option"></a>
### Nested Schema for `configuration.namespace_option`

Required:

- `name` (String) Namespace name.

Optional:

- `ingest_traces` (Boolean) Whether to ingest traces for this namespace.
- `log_sampling` (Number) Log sampling rate (0-100).


<a id="nestedblock--configuration--service_option"></a>
### Nested Schema for `configuration.service_option`

Required:

- `name` (String) Service name.

Optional:

- `ingest_traces` (Boolean) Whether to ingest traces for this service.
- `log_sampling` (Number) Log sampling rate (0-100).



<a id="nestedblock--custom_bucket"></a>
### Nested Schema for `custom_bucket`

Required:

- `access_key_id` (String) Access key ID for the bucket.
- `endpoint` (String) Bucket endpoint URL.
- `name` (String) Bucket name.
- `secret_access_key` (String, Sensitive) Secret access key for the bucket.

Optional:

- `keep_data_after_retention` (Boolean) Whether to keep data in the bucket after the retention period.


<a id="nestedblock--databases"></a>
### Nested Schema for `databases`

Required:

- `host` (String) The database host.
- `port` (Number) The database port.
- `service_type` (String) The type of database service.

Optional:

- `password` (String, Sensitive) The database password.
- `ssl_mode` (String) SSL mode for PostgreSQL connections. Valid values: `disable`, `require`, `verify-ca`.
- `tls` (String) TLS mode for MySQL connections. Valid values: `false`, `true`, `skip-verify`, `preferred`.
- `username` (String) The database username.

Read-Only:

- `id` (Number) The ID of this database connection (assigned by the API).


<a id="nestedblock--proxy_config"></a>
### Nested Schema for `proxy_config`

Optional:

- `buffering_proxy_listen_on` (String) Address and port for the buffering proxy to listen on.
- `enable_buffering_proxy` (Boolean) Enable the HTTP buffering proxy for the collector.
- `enable_http_basic_auth` (Boolean) Enable HTTP Basic Authentication for the collector proxy.
- `enable_ssl_certificate` (Boolean) Enable custom SSL/TLS certificate for the collector.
- `http_basic_auth_password` (String, Sensitive) Password for HTTP Basic Authentication. This value is write-only and never returned by the API.
- `http_basic_auth_username` (String) Username for HTTP Basic Authentication.
- `ssl_certificate_host` (String) Hostname for the SSL certificate.
